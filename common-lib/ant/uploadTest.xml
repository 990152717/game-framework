<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE build>
<project default="upload-all" name="Niuniu" basedir="../../.">
	<description>
		niuniu自动上传脚本
	</description>
	<echo>Building niuniu...</echo>
	<echo>basedir: ${basedir}</echo>

	<!--发布变量设置-->
	<property name="host" value="39.108.234.64" />
	<property name="user" value="root" />
	<property name="password" value="Bdsk@201766" />

	<!--定义相关编译变量-->
	<property name="is-debug" value="on" />
	<property name="java-version" value="1.8" />
	<property name="app-version" value="1.0" />
	<property name="webapp-version" value="1.0" />
	<property name="exclude-svn" value="**/*.svn/*.*" />
	<property name="exclude-local" value="*.propertieslocal" />
	<property name="exclude-xml" value="WEB-INF/global.xml" />

	<!--输入变量定义-->
	<property name="libs" value="${basedir}/CommonLib" />
	<property name="util" value="${basedir}/CommonUtil" />
	<property name="framework" value="${basedir}/Framework" />
	<property name="pbprotocol" value="${basedir}../../../../common/branches/PBProtocol" />
	<property name="gamedata" value="${basedir}/GameData" />
	<property name="gameserver" value="${basedir}/GameServer" />
	<property name="fightserver" value="${basedir}/FightServer" />
	<property name="loginServer" value="${basedir}/LoginServer" />
	<property name="gamelogic" value="${basedir}/GameLogic" />

	<!--定义最终文件输出路径-->
	<property name="lib-out" value="${basedir}/deploy/lib" />
	<property name="app-out" value="${basedir}/deploy/app" />
	<property name="web-out" value="${basedir}/deploy/web" />
	<property name="gameserver-out" value="${app-out}/gameserver" />
	<property name="loginServer-out" value="${web-out}/loginserver" />
	<property name="fightserver-out" value="${app-out}/fightserver" />
	<property name="centerserver-out" value="${app-out}/centerserver" />
	
	<!-- 自动上传设置 -->
	<property name="ftpserverdir" value="/niuniu" />
	<property name="centerserverdir" value="${host}:${ftpserverdir}/app/centerserver" />
	<property name="gameserverdir" value="${host}:${ftpserverdir}/app/gameserver" />
	<property name="fightserverdir" value="${host}:${ftpserverdir}/app/fightserver" />
	<property name="loginServedir" value="${host}:${ftpserverdir}/web/loginserver" />

	<target name="upload-center">
		<echo>==========================start centerserver upload==========================</echo>

		<!-- 上传GameServer到 FTP 服务器-->
		<scp todir="${user}:${password}@${centerserverdir}" trust="true" verbose="true">
			<fileset dir="${centerserver-out}">
				<include name="**/niuniu*.jar" />
				<include name="**/framework*.jar" />
			</fileset>
		</scp>
		<echo>==========================end centerserver upload=====================================</echo>
	</target>
	<target name="upload-server">
		<echo>==========================start gameserver upload==========================</echo>

		<!-- 上传GameServer到 FTP 服务器-->
		<scp todir="${user}:${password}@${gameserverdir}" trust="true" verbose="true">
			<fileset dir="${gameserver-out}">
				<include name="**/niuniu*.jar" />
				<include name="**/framework*.jar" />
			</fileset>
		</scp>
		<echo>==========================end gameserver upload=====================================</echo>
	</target>
	<target name="upload-fightserver">
		<echo>==========================start fightserver upload==========================</echo>

		<!-- 上传FightServer到 FTP 服务器-->
		<scp todir="${user}:${password}@${fightserverdir}" trust="true" verbose="true">
			<fileset dir="${fightserver-out}">
				<include name="**/niuniu*.jar" />
				<include name="**/framework*.jar" />
			</fileset>
		</scp>
		<echo>==========================end fightserver upload=====================================</echo>
	</target>
	<target name="upload-web">
		<echo>==========================start web upload==========================</echo>
		<!-- 上传Web到 FTP 服务器-->
		<scp todir="${user}:${password}@${loginServedir}" trust="true" verbose="true">
			<fileset dir="${loginServer-out}">
				<include name="**/niuniu*.jar" />
				<include name="**/framework*.jar" />
			</fileset>
		</scp>
		<echo>==========================end web upload=====================================</echo>
	</target>
	<target name="upload-all" depends="upload-center,upload-server,upload-fightserver,upload-web">
	</target>
</project>